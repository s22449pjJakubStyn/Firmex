<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../static/styles/style.css">
    <link rel="stylesheet" href="../static/styles/login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Firmex logowanie</title>

</head>
<body>
{% block nav %}
<div class="nav">
    <div class="logo">
        <a href="/"><img src="../static/img/logo.png" alt="logo" class="company-logo"></a>
    </div>
    <div>
        <button class="category">Kategorie</button>
    </div>
    <div class="searcher-container">
        <form>
            <input class="searcher-input " type="search" placeholder="Search">
        </form>
    </div>
    <div class="current-user">
    {% if current_user.is_authenticated %}
        <span>Welcome, {{ current_user.nickName }}</span>
    {% endif %}
</div>
    <div class="account">
        <img src="../static/img/user.png" alt="user" class="account-icon">
    </div>
     <div id="account-dropdown" class="account-dropdown">
        <div class="dropdown-content">
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('logout') }}" class="logout">Wyloguj</a>
                <a href="#" class="account-button">Konto</a>
            {% else %}
                <a href="{{ url_for('login') }}" class="login">Zaloguj</a>
                <a href="{{ url_for('register') }}" class="register">Zarejestruj</a>
            {% endif %}
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('.account').click(function () {
            $('#account-dropdown').toggle();
        });
    });
</script>
{% endblock %}
  <div class="login-content">
    {% block content %}
  <h1>Login</h1>
  <form method="POST">
    {{ form.hidden_tag() }}
    <div class="form-group">
      {{ form.email(class="form-control", placeholder="Email") }}
      {% for error in form.email.errors %}
        <p class="error-message">{{ error }}</p>
      {% endfor %}
    </div>
    <div class="form-group">
      {{ form.password(class="form-control", placeholder="Hasło") }}
      {% for error in form.password.errors %}
        <p class="error-message">{{ error }}</p>
      {% endfor %}
    </div>
    <div class="form-group">
      {{ form.remember(class="form-check-input") }}
      {{ form.remember.label(class="form-check-label") }}
    </div>
    <button type="submit" class="register_button">Zaloguj się</button>
{# {% with messages = get_flashed_messages(with_categories=true) %}#}
{#  {% for category, message in messages %}#}
{#    <div id="toast" class="{{ category }}">#}
{#      <p>{{ message }}</p>#}
{#    </div>#}
{#    <script>#}
{#      // Funkcja do ukrywania komunikatu sukcesu po pewnym czasie#}
{#      function hideToast() {#}
{#        var toast = document.getElementById('toast');#}
{#        toast.style.opacity = '0';#}
{#        setTimeout(function() {#}
{#          toast.style.display = 'none';#}
{#        }, 500); // Czas wyświetlania komunikatu w milisekundach#}
{#      }#}
{#      // Wywołanie funkcji hideToast po określonym czasie#}
{#      setTimeout(hideToast, 5000); // Czas pojawienia się komunikatu w milisekundach#}
{#    </script>#}
{#  {% endfor %}#}
{#{% endwith %}#}
  </form>
{% endblock %}r
  <a class="forget-password" href="#"> Zapomniałeś hasła?</a>
  <a class="go-register" href="/register"> Załóż nowe konto!</a>
  </div>
<div class="footer">
        <p class="footer-content">Footer</p>
</div>
</body>
</html>